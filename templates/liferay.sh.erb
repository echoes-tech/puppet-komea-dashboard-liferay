#!/bin/bash

LIFERAY_LOCATION="<%= @liferay_location %>"

start() {
  $LIFERAY_LOCATION/tomcat/bin/startup.sh
}

stop() {
  $LIFERAY_LOCATION/tomcat/bin/shutdown.sh
}

status() {
  if [ -e $LIFERAY_LOCATION/tomcat/catalina_pid.txt ]; then
    liferayPID=`cat $LIFERAY_LOCATION/tomcat/catalina_pid.txt`
    echo "Liferay (pid $liferayPID) is running..."
  else
    echo "Liferay is NOT running"
    exit 1
  fi
}

case "$1" in
    start)
        start
        ;;
    stop)
        stop
        ;;
    status)
        status
        ;;
    restart)
        stop
        start
        ;;
    *)
        echo $"Usage: $0 {start|stop|restart|status}"
        exit 1
esac

exit 0
